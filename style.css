/* ================================
   Rock Paper Scissors Game (JS)
   Designed to work with:
   - Animated background
   - Loader animation
   - Result fade-in
   - Glow buttons
   ================================ */

/* ----- Game State ----- */
let playerScore = 0;
let computerScore = 0;

/* ----- Game Options ----- */
const options = ["rock", "paper", "scissor"];

/* Rules:
   key beats value
   rock     -> scissor
   scissor  -> paper
   paper    -> rock
*/
const rules = {
    rock: "scissor",
    scissor: "paper",
    paper: "rock"
};

/* ----- DOM Elements ----- */
const playerInput = document.getElementById("playerInput");
const loader = document.getElementById("loader");
const resultBox = document.getElementById("resultBox");

const playerChoiceText = document.getElementById("playerChoice");
const computerChoiceText = document.getElementById("computerChoice");
const resultText = document.getElementById("resultText");

const playerScoreText = document.getElementById("playerScore");
const computerScoreText = document.getElementById("computerScore");

/* ================================
   Main Game Function
   ================================ */
function playGame() {
    // Get and clean user input
    const playerChoice = playerInput.value.trim().toLowerCase();

    /* ----- Input Validation ----- */
    if (!options.includes(playerChoice)) {
        alert("‚ùå Please enter rock, paper, or scissor");
        return;
    }

    /* ----- UI: Show Loader ----- */
    loader.style.display = "block";
    resultBox.style.display = "none";

    /* ----- Artificial delay (for animation feel) ----- */
    setTimeout(() => {
        loader.style.display = "none";

        /* ----- Computer Choice ----- */
        const computerChoice =
            options[Math.floor(Math.random() * options.length)];

        /* ----- Decide Result ----- */
        let resultMessage = "";

        if (playerChoice === computerChoice) {
            resultMessage = "It's a tie ü§ù";
        } else if (rules[playerChoice] === computerChoice) {
            resultMessage = "You win üéâ";
            playerScore++;
        } else {
            resultMessage = "Computer wins üíª";
            computerScore++;
        }

        /* ----- Update UI Text ----- */
        playerChoiceText.innerText = `You chose: ${playerChoice}`;
        computerChoiceText.innerText = `Computer chose: ${computerChoice}`;
        resultText.innerText = resultMessage;

        /* ----- Update Scoreboard ----- */
        playerScoreText.innerText = playerScore;
        computerScoreText.innerText = computerScore;

        /* ----- Show Result Box ----- */
        resultBox.style.display = "block";

        /* ----- Clear Input ----- */
        playerInput.value = "";

    }, 600); // matches loader animation timing
}

/* ================================
   Reset Game Function
   ================================ */
function resetScore() {
    playerScore = 0;
    computerScore = 0;

    playerScoreText.innerText = 0;
    computerScoreText.innerText = 0;

    resultBox.style.display = "none";
}

/* ================================
   Optional UX Enhancements
   ================================ */

/* Allow Enter key to submit */
playerInput.addEventListener("keydown", function (event) {
    if (event.key === "Enter") {
        playGame();
    }
});

/* Prevent empty whitespace input */
playerInput.addEventListener("input", function () {
    playerInput.value = playerInput.value.replace(/\s{2,}/g, " ");
});
